<x-app-layout>
    <ol class="flex items-center sm:w-4/5 sm:ml-[10%] p-4">
        <li id="step-1"
            class="active flex w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-gray-700 after:border-4 after:inline-block">
            <span class="flex items-center justify-center w-10 h-10 bg-red-800 rounded-full lg:h-12 lg:w-12 shrink-0">
                <svg id="step-0-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"
                     class="w-5 h-5 text-gray-100 lg:w-6 lg:h-6" fill="currentColor">
                    <path
                        d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm80 256h64c44.2 0 80 35.8 80 80c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16c0-44.2 35.8-80 80-80zm96-96c0 35.3-28.7 64-64 64s-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zm128-32H496c8.8 0 16 7.2 16 16s-7.2 16-16 16H368c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64H496c8.8 0 16 7.2 16 16s-7.2 16-16 16H368c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64H496c8.8 0 16 7.2 16 16s-7.2 16-16 16H368c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/>
                </svg>
                <svg id="check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                     class="hidden w-5 h-5 text-gray-100 lg:w-6 lg:h-6" fill="currentColor">
                    <path
                        d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/>
                </svg>
            </span>
        </li>
        <li id="step-2"
            class="flex w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-gray-700 after:border-4 after:inline-block">
            <span class="flex items-center justify-center w-10 h-10 bg-gray-700 rounded-full lg:h-12 lg:w-12 shrink-0">
                <svg id="step-1-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"
                     class="w-5 h-5 text-gray-100 lg:w-6 lg:h-6" fill="currentColor">
                    <path
                        d="M160 80c0-26.5 21.5-48 48-48h32c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V80zM0 272c0-26.5 21.5-48 48-48H80c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V272zM368 96h32c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H368c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48z"/>
                </svg>
                <svg id="check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                     class="hidden w-5 h-5 text-gray-100 lg:w-6 lg:h-6" fill="currentColor">
                    <path
                        d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/>
                </svg>
            </span>
        </li>
        <li id="step-3"
            class="flex w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-gray-700 after:border-4 after:inline-block">
            <span class="flex items-center justify-center w-10 h-10 bg-gray-700 rounded-full lg:h-12 lg:w-12 shrink-0">
                <svg id="step-2-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                     class="w-5 h-5 text-gray-100 lg:w-6 lg:h-6" fill="currentColor">
                    <path
                        d="M464 6.1c9.5-8.5 24-8.1 33 .9l8 8c9 9 9.4 23.5 .9 33l-85.8 95.9c-2.6 2.9-4.1 6.7-4.1 10.7V176c0 8.8-7.2 16-16 16H384.2c-4.6 0-8.9 1.9-11.9 5.3L100.7 500.9C94.3 508 85.3 512 75.8 512c-8.8 0-17.3-3.5-23.5-9.8L9.7 459.7C3.5 453.4 0 445 0 436.2c0-9.5 4-18.5 11.1-24.8l111.6-99.8c3.4-3 5.3-7.4 5.3-11.9V272c0-8.8 7.2-16 16-16h34.6c3.9 0 7.7-1.5 10.7-4.1L464 6.1zM432 288c3.6 0 6.7 2.4 7.7 5.8l14.8 51.7 51.7 14.8c3.4 1 5.8 4.1 5.8 7.7s-2.4 6.7-5.8 7.7l-51.7 14.8-14.8 51.7c-1 3.4-4.1 5.8-7.7 5.8s-6.7-2.4-7.7-5.8l-14.8-51.7-51.7-14.8c-3.4-1-5.8-4.1-5.8-7.7s2.4-6.7 5.8-7.7l51.7-14.8 14.8-51.7c1-3.4 4.1-5.8 7.7-5.8zM87.7 69.8l14.8 51.7 51.7 14.8c3.4 1 5.8 4.1 5.8 7.7s-2.4 6.7-5.8 7.7l-51.7 14.8L87.7 218.2c-1 3.4-4.1 5.8-7.7 5.8s-6.7-2.4-7.7-5.8L57.5 166.5 5.8 151.7c-3.4-1-5.8-4.1-5.8-7.7s2.4-6.7 5.8-7.7l51.7-14.8L72.3 69.8c1-3.4 4.1-5.8 7.7-5.8s6.7 2.4 7.7 5.8zM224 0c3.7 0 6.9 2.5 7.8 6.1l6.8 27.3 27.3 6.8c3.6 .9 6.1 4.1 6.1 7.8s-2.5 6.9-6.1 7.8l-27.3 6.8-6.8 27.3c-.9 3.6-4.1 6.1-7.8 6.1s-6.9-2.5-7.8-6.1l-6.8-27.3-27.3-6.8c-3.6-.9-6.1-4.1-6.1-7.8s2.5-6.9 6.1-7.8l27.3-6.8 6.8-27.3c.9-3.6 4.1-6.1 7.8-6.1z"/>
                </svg>
                <svg id="check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                     class="hidden w-5 h-5 text-gray-100 lg:w-6 lg:h-6" fill="currentColor">
                    <path
                        d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/>
                </svg>
            </span>
        </li>
        <li id="step-4"
            class="flex w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-gray-700 after:border-4 after:inline-block">
            <span class="flex items-center justify-center w-10 h-10 bg-gray-700 rounded-full lg:h-12 lg:w-12 shrink-0">
                <svg id="step-3-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"
                     class="w-5 h-5 text-gray-100 lg:w-6 lg:h-6" fill="currentColor">
                    <path
                        d="M0 80v48c0 17.7 14.3 32 32 32H48 96V80c0-26.5-21.5-48-48-48S0 53.5 0 80zM112 32c10 13.4 16 30 16 48V384c0 35.3 28.7 64 64 64s64-28.7 64-64v-5.3c0-32.4 26.3-58.7 58.7-58.7H480V128c0-53-43-96-96-96H112zM464 480c61.9 0 112-50.1 112-112c0-8.8-7.2-16-16-16H314.7c-14.7 0-26.7 11.9-26.7 26.7V384c0 53-43 96-96 96H368h96z"/>
                </svg>
                <svg id="check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                     class="hidden w-5 h-5 text-gray-100 lg:w-6 lg:h-6" fill="currentColor">
                    <path
                        d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/>
                </svg>
            </span>
        </li>
        <li id="step-5" class="flex items-center">
            <span class="flex items-center justify-center w-10 h-10 bg-gray-700 rounded-full lg:h-12 lg:w-12 shrink-0">
                <svg id="step-4-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                     class="w-5 h-5 text-gray-100 lg:w-6 lg:h-6" fill="currentColor">
                    <path
                        d="M512 80c0 18-14.3 34.6-38.4 48c-29.1 16.1-72.5 27.5-122.3 30.9c-3.7-1.8-7.4-3.5-11.3-5C300.6 137.4 248.2 128 192 128c-8.3 0-16.4 .2-24.5 .6l-1.1-.6C142.3 114.6 128 98 128 80c0-44.2 86-80 192-80S512 35.8 512 80zM160.7 161.1c10.2-.7 20.7-1.1 31.3-1.1c62.2 0 117.4 12.3 152.5 31.4C369.3 204.9 384 221.7 384 240c0 4-.7 7.9-2.1 11.7c-4.6 13.2-17 25.3-35 35.5c0 0 0 0 0 0c-.1 .1-.3 .1-.4 .2l0 0 0 0c-.3 .2-.6 .3-.9 .5c-35 19.4-90.8 32-153.6 32c-59.6 0-112.9-11.3-148.2-29.1c-1.9-.9-3.7-1.9-5.5-2.9C14.3 274.6 0 258 0 240c0-34.8 53.4-64.5 128-75.4c10.5-1.5 21.4-2.7 32.7-3.5zM416 240c0-21.9-10.6-39.9-24.1-53.4c28.3-4.4 54.2-11.4 76.2-20.5c16.3-6.8 31.5-15.2 43.9-25.5V176c0 19.3-16.5 37.1-43.8 50.9c-14.6 7.4-32.4 13.7-52.4 18.5c.1-1.8 .2-3.5 .2-5.3zm-32 96c0 18-14.3 34.6-38.4 48c-1.8 1-3.6 1.9-5.5 2.9C304.9 404.7 251.6 416 192 416c-62.8 0-118.6-12.6-153.6-32C14.3 370.6 0 354 0 336V300.6c12.5 10.3 27.6 18.7 43.9 25.5C83.4 342.6 135.8 352 192 352s108.6-9.4 148.1-25.9c7.8-3.2 15.3-6.9 22.4-10.9c6.1-3.4 11.8-7.2 17.2-11.2c1.5-1.1 2.9-2.3 4.3-3.4V304v5.7V336zm32 0V304 278.1c19-4.2 36.5-9.5 52.1-16c16.3-6.8 31.5-15.2 43.9-25.5V272c0 10.5-5 21-14.9 30.9c-16.3 16.3-45 29.7-81.3 38.4c.1-1.7 .2-3.5 .2-5.3zM192 448c56.2 0 108.6-9.4 148.1-25.9c16.3-6.8 31.5-15.2 43.9-25.5V432c0 44.2-86 80-192 80S0 476.2 0 432V396.6c12.5 10.3 27.6 18.7 43.9 25.5C83.4 438.6 135.8 448 192 448z"/>
                </svg>
                <svg id="check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                     class="hidden w-5 h-5 text-gray-100 lg:w-6 lg:h-6" fill="currentColor">
                    <path
                        d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/>
                </svg>
            </span>
        </li>
    </ol>

    <form action="{{route('heroes.store')}}" method="post" id="form-perso">
        @csrf
        <div id="step-div-0" class="p-4 space-y-8">
            <div class="grid grid-cols-2 gap-8">
                <div class="relative">
                    <label for="category_id" class="font-titleMiddleAge text-sm text-red-800">
                        Classe
                    </label>
                    <select id="classe" name="category_id"
                            class="block px-2.5 pb-2.5 pt-4 w-full text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800">
                        <option value="">Choisis une classe</option>
                        @foreach($categories as $category)
                            <option value="{{$category->getKey()}}" {{ old('category_id') ? "selected" : "" }}>{{$category->name}}</option>
                        @endforeach
                    </select>
                    <x-form-alert :error="'category_id'" />
                </div>
                <div class="relative">
                    <label for="background_id" class="font-titleMiddleAge text-sm text-red-800">
                        Historique
                    </label>
                    <select id="historique" name="background_id"
                            class="block px-2.5 pb-2.5 pt-4 w-full text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800">
                        <option value="">Choisis un historique</option>
                        @foreach($backgrounds as $background)
                            <option value="{{$background->getKey()}}" {{ old('background_id') ? "selected" : "" }}>{{$background->name}}</option>
                        @endforeach
                    </select>
                    <x-form-alert :error="'background_id'" />
                </div>
                <div class="relative">
                    <label for="subrace_id" class="font-titleMiddleAge text-sm text-red-800">
                        Race
                    </label>
                    <select id="subrace" name="subrace_id"
                            class="block px-2.5 pb-2.5 pt-4 w-full text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800">
                        <option value="">Choisis une sous-race</option>
                        @foreach($subRaces as $subRace)
                            <option value="{{$subRace->getKey()}}" {{ old('subrace_id') ? "selected" : "" }}>{{$subRace->fullName()}}</option>
                        @endforeach
                    </select>
                    <x-form-alert :error="'subrace_id'" />
                </div>
                <div class="relative">
                    <label for="alignment_id" class="font-titleMiddleAge text-sm text-red-800">
                        Alignement
                    </label>
                    <select id="alignement" name="alignment_id"
                            class="block px-2.5 pb-2.5 pt-4 w-full text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800">
                        <option value="">Choisis un alignement</option>
                        @foreach($alignments as $alignment)
                            <option value="{{$alignment->getKey()}}" {{ old('alignment_id') ? "selected" : "" }}>{{$alignment->name}}</option>
                        @endforeach
                    </select>
                    <x-form-alert :error="'alignment_id'" />
                </div>
                <div class="relative">
                    <label for="goal_id" class="font-titleMiddleAge text-sm text-red-800">
                        Objectif
                    </label>
                    <select id="goal" name="goal_id"
                            class="block px-2.5 pb-2.5 pt-4 w-full text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800">
                        <option value="">Choisis un objectif</option>
                        @foreach($goals as $goal)
                            <option value="{{$goal->getKey()}}" {{ old('goal_id') ? "selected" : "" }}>{{ucfirst($goal->name)}}</option>
                        @endforeach
                    </select>
                    <x-form-alert :error="'goal_id'" />
                </div>
                <div class="relative">
                    <label for="adventures" class="font-titleMiddleAge text-sm text-red-800">
                        Aventure
                    </label>
                    <select id="adventures" name="adventures[]"
                            class="block px-2.5 pb-2.5 pt-4 w-full text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800">
                        <option value="">Choisis une aventure</option>
                        @foreach($adventures as $adventure)
                            <option value="{{$adventure->getKey()}}">{{ucfirst($adventure->name)}}</option>
                        @endforeach
                    </select>
                </div>
                <div class="relative col-span-2">
                    <label for="past" class="block mb-2 text-lg font-medium text-red-800 font-titleMiddleAge">
                        Passé du personnage
                    </label>
                    <textarea id="past" name="character_past" rows="4"
                              class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-600 border-gray-600 placeholder-gray-400 focus:ring-red-800 focus:border-red-800"
                              placeholder="Je suis convaincu...">{{ old('character_past') ?? "" }}</textarea>
                    <x-form-alert :error="'character_past'" />
                </div>
            </div>
            <hr class="border border-gray-300">
            <div class="grid grid-cols-3 gap-8">
                <div class="relative">
                    <input type="number" id="armure" name="armor_class"
                           class="block px-2.5 pb-2.5 pt-4 w-full text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800 peer"
                           placeholder=" " value="{{ old('armor_class') ?? "" }}"/>
                    <label for="armure"
                           class="absolute font-titleMiddleAge text-sm text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-[#fafaf8] px-2 peer-focus:px-2 peer-focus:text-red-800 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1">
                        Classe d'armure
                    </label>
                    <x-form-alert :error="'armor_class'" />
                </div>
                <div class="relative">
                    <input type="number" id="initiative" name="initiative"
                           class="block px-2.5 pb-2.5 pt-4 w-full text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800 peer"
                           placeholder=" " value="{{ old('initiative') ?? "" }}"/>
                    <label for="initiative"
                           class="absolute font-titleMiddleAge text-sm text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-[#fafaf8] px-2 peer-focus:px-2 peer-focus:text-red-800 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1">
                        Initiative
                    </label>
                    <x-form-alert :error="'initiative'" />
                </div>
                <div class="relative">
                    <input type="number" id="vitesse" name="speed" step="0.1"
                           class="block px-2.5 pb-2.5 pt-4 w-full text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800 peer"
                           placeholder=" " value="{{ old('speed') ?? "" }}"/>
                    <label for="vitesse"
                           class="absolute font-titleMiddleAge text-sm text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-[#fafaf8] px-2 peer-focus:px-2 peer-focus:text-red-800 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1">
                        Vitesse
                    </label>
                    <x-form-alert :error="'speed'" />
                </div>
                <div class="relative">
                    <input type="number" id="pdv" name="maximum_hp"
                           class="block px-2.5 pb-2.5 pt-4 w-full text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800 peer"
                           placeholder=" " value="{{ old('maximum_hp') ?? "" }}"/>
                    <label for="pdv"
                           class="absolute font-titleMiddleAge text-sm text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-[#fafaf8] px-2 peer-focus:px-2 peer-focus:text-red-800 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1">
                        Point de vie
                    </label>
                    <x-form-alert :error="'maximum_hp'" />
                </div>
                <div class="relative">
                    <input type="text" id="des" name="hit_dice"
                           class="block px-2.5 pb-2.5 pt-4 w-full text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800 peer"
                           placeholder=" " value="{{ old('hit_dice') ?? "" }}"/>
                    <label for="des"
                           class="absolute font-titleMiddleAge text-sm text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-[#fafaf8] px-2 peer-focus:px-2 peer-focus:text-red-800 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1">
                        Dés de vie
                    </label>
                    <x-form-alert :error="'hit_dice'" />
                </div>
                <div class="relative">
                    <input type="number" id="sagesse_passive" name="passive_wisdom"
                           class="block px-2.5 pb-2.5 pt-4 w-full text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800 peer"
                           placeholder=" " value="{{ old('passive_wisdom') ?? "" }}"/>
                    <label for="sagesse_passive"
                           class="absolute font-titleMiddleAge text-sm text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-[#fafaf8] px-2 peer-focus:px-2 peer-focus:text-red-800 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1">
                        Sagesse passive
                    </label>
                    <x-form-alert :error="'passive_wisdom'" />
                </div>
            </div>
            <hr class="border border-gray-300">
            <div class="grid grid-cols-2 gap-8">
                <div>
                    <label for="traits" class="block mb-2 text-lg font-medium text-red-800 font-titleMiddleAge">
                        Traits de personnalité
                    </label>
                    <textarea id="traits" name="traits" rows="4"
                              class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-600 border-gray-600 placeholder-gray-400 focus:ring-red-800 focus:border-red-800"
                              placeholder="Quand je prends une...">{{ old('traits') ?? "" }}</textarea>
                    <x-form-alert :error="'traits'" />
                </div>
                <div>
                    <label for="ideaux" class="block mb-2 text-lg font-medium text-red-800 font-titleMiddleAge">
                        Idéaux
                    </label>
                    <textarea id="ideaux" name="ideaux" rows="4"
                              class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-600 border-gray-600 placeholder-gray-400 focus:ring-red-800 focus:border-red-800"
                              placeholder="Sincérité. Il est...">{{ old('ideaux') ?? "" }}</textarea>
                    <x-form-alert :error="'ideaux'" />
                </div>
                <div>
                    <label for="liens" class="block mb-2 text-lg font-medium text-red-800 font-titleMiddleAge">
                        Liens
                    </label>
                    <textarea id="liens" name="liens" rows="4"
                              class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-600 border-gray-600 placeholder-gray-400 focus:ring-red-800 focus:border-red-800"
                              placeholder="Un jour, Arbrefoudre...">{{ old('liens') ?? "" }}</textarea>
                    <x-form-alert :error="'liens'" />
                </div>
                <div>
                    <label for="defauts" class="block mb-2 text-lg font-medium text-red-800 font-titleMiddleAge">
                        Défauts
                    </label>
                    <textarea id="defauts" name="defauts" rows="4"
                              class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-600 border-gray-600 placeholder-gray-400 focus:ring-red-800 focus:border-red-800"
                              placeholder="Je suis convaincu...">{{ old('defauts') ?? "" }}</textarea>
                    <x-form-alert :error="'defauts'" />
                </div>
            </div>
        </div>
        <div id="step-div-1" class="hidden p-4 space-y-8">
            <div class="grid grid-cols-6 gap-8">
                @foreach($abilities as $ability)
                    <div class="space-y-4">
                        <div class="space-y-2">
                            <div class="relative">
                                <input
                                    type="number"
                                    id="valeur-{{$ability->name}}"
                                    name="abilities[{{$ability->getKey()}}][attributes][ability_value]"
                                    class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 appearance-none border-gray-600 focus:outline-none focus:ring-0 focus:border-red-800 peer"
                                    placeholder="Valeur"
                                />
                                <label
                                    for="valeur-{{$ability->name}}"
                                    class="absolute font-titleMiddleAge text-gray-500 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-[#fafaf8] px-2 peer-focus:px-2 peer-focus:text-red-800 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1"
                                >
                                    {{ $ability->name }}
                                </label>
                            </div>
                            <div class="relative">
                                <input
                                    type="number"
                                    id="bonus-{{$ability->name}}"
                                    name="abilities[{{$ability->getKey()}}][attributes][other_modifier_ability]"
                                    class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 appearance-none border-gray-600 focus:outline-none focus:ring-0 focus:border-red-800 peer"
                                    placeholder="Bonus"
                                />
                            </div>
                        </div>
                        <hr class="border border-gray-300">
                        <div class="space-y-2">
                            <input type="hidden" name="abilities[{{$ability->getKey()}}][savingThrow][charactable_id]"
                                   value="{{$ability->savingThrow->getKey()}}">
                            <h2 class="font-titleMiddleAge text-red-800 font-sm">Jet de suavegarde</h2>
                            <div class="relative">
                                <input
                                    type="number"
                                    id="modificateur-{{$ability->name}}"
                                    name="abilities[{{$ability->getKey()}}][savingThrow][other_modifier_throw]"
                                    class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 appearance-none border-gray-600 focus:outline-none focus:ring-0 focus:border-red-800 peer"
                                    placeholder="Bonus"
                                />
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input
                                    type="checkbox"
                                    id="maitrise-{{$ability->name}}"
                                    name="abilities[{{$ability->getKey()}}][savingThrow][is_proficient]"
                                    value="1"
                                    class="sr-only peer"
                                >
                                <div
                                    class="w-11 h-6 peer-focus:outline-none rounded-full peer bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-800"></div>
                                <span class="ml-3 text-sm font-medium text-gray-900">Maîtrisé ?</span>
                            </label>
                        </div>
                        <hr class="border border-gray-300">
                        <div class="space-y-4">
                            <h2 class="font-titleMiddleAge text-red-800 font-sm">Compétences</h2>
                            @foreach($ability->skills as $skill)
                                <div class="space-y-2">
                                    <div class="relative">
                                        <input
                                            type="number" id="modificateur-{{$skill->name}}"
                                            name="abilities[{{$ability->getKey()}}][skills][{{$skill->getKey()}}][other_modifier_skill]"
                                            class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 appearance-none border-gray-600 focus:outline-none focus:ring-0 focus:border-red-800 peer"
                                            placeholder="Bonus"
                                        />
                                        <label
                                            for="modificateur-{{$skill->name}}"
                                            class="absolute font-titleMiddleAge text-gray-500 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-[#fafaf8] px-2 peer-focus:px-2 peer-focus:text-red-800 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1"
                                        >
                                            {{ $skill->name }}
                                        </label>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input
                                            type="checkbox" id="maitrise-{{$skill->name}}"
                                            name="abilities[{{$ability->getKey()}}][skills][{{$skill->getKey()}}][is_proficient]"
                                            value="1"
                                            class="sr-only peer"
                                        >
                                        <div
                                            class="w-11 h-6 peer-focus:outline-none rounded-full peer bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-800"></div>
                                        <span class="ml-3 text-sm font-medium text-gray-900">Maîtrisé ?</span>
                                    </label>
                                </div>
                            @endforeach
                        </div>
                    </div>
                @endforeach
            </div>
        </div>
        <div id="step-div-2" class="hidden p-4 space-y-8">
            <div id="div-weapons">
                <div class="relative overflow-x-auto table-auto shadow-md sm:rounded-lg">
                    <table id="table-weapons"
                           class="w-full text-sm text-left text-gray-400"
                           x-data="{ component: [] }"
                           x-init="component = $refs.tbody.querySelector('tr')"
                    >
                        <thead class="text-xs uppercase bg-gray-900">
                        <tr>
                            <th scope="col" class="px-6 py-3">
                                Informations complètes de l'arme
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Action
                            </th>
                        </tr>
                        </thead>
                        <tbody x-ref="tbody">
{{--                            @if(old('weapons'))--}}
{{--                                @foreach(old('weapons') as $oldWeapon)--}}
                                    <tr class="border-b">
                                        <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                                            <datalist id="weapons">
                                                @foreach($weapons as $weapon)
                                                    <option
                                                        value="{{"{$weapon->name} | {$weapon->atk_bonus} | {$weapon->damage_type}"}}"></option>
                                                @endforeach
                                            </datalist>
                                            <input type="text" autocomplete="off" placeholder="Choisis ton arme" list="weapons"
                                                   id="weapon_id" name="weapons[]"
                                                   class="block w-full px-2.5 pb-2.5 pt-4 text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800">
                                        </td>
                                        <td class="px-6 py-4">
                                            <button
                                                type="button"
                                                class="font-bold text-red-800 hover:underline cursor-pointer"
                                                @click.prevent="$el.parentNode.parentNode.remove()"
                                            >
                                                Supprimer
                                            </button>
                                        </td>
                                    </tr>
{{--                                @endforeach--}}
{{--                            @endif--}}
                        </tbody>
                        <tfoot>
                        <tr class="font-semibold text-gray-900">
                            <th id="add-line" scope="row" colspan="5" class="px-6 py-3">
                                <div class="font-bold text-red-800 flex justify-end">
                                    <p
                                        class="w-fit cursor-pointer hover:underline"
                                        @click="elt = document.createElement('tr');
                                                    elt.innerHTML = component.innerHTML;
                                                    elt.classList = component.classList
                                                    $refs.tbody.appendChild(elt)"
                                    >
                                        Ajouter une ligne
                                    </p>
                                </div>
                            </th>
                        </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
            <div id="div-attacks">
                <div class="relative overflow-x-auto table-auto shadow-md sm:rounded-lg">
                    <table
                        id="table-attacks"
                        class="w-full text-sm text-left text-gray-400"
                        x-data="{ component: [] }"
                        x-init="component = $refs.tbody.querySelector('tr')"
                    >
                        <thead class="text-xs uppercase bg-gray-900">
                        <tr>
                            <th scope="col" class="px-6 py-3">
                                Nom de l'attaque
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Description
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Action
                            </th>
                        </tr>
                        </thead>
                        <tbody x-ref="tbody">
                        <tr x-data="" x-ref="line" class="border-b">
                            <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                                <select onchange="disabledDescription(this)" id="attack_id" name="attackIds[]"
                                        class="block w-full px-2.5 pb-2.5 pt-4 text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800">
                                    <option value="">Choisis une option</option>
                                    @foreach($attacks as $attack)
                                        <option value="{{$attack->getKey()}}">{{$attack->name}}</option>
                                    @endforeach
                                </select>
                            </td>
                            <td class="px-6 py-4">
                                <textarea id="attack_description" name="attackDescriptions[]" rows="4"
                                          class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-600 border-gray-600 placeholder-gray-400 focus:ring-red-800 focus:border-red-800"
                                          placeholder="Je suis convaincu..."></textarea>
                            </td>
                            <td class="px-6 py-4">
                                <button
                                    type="button"
                                    class="font-bold text-red-800 hover:underline cursor-pointer"
                                    @click.prevent="$el.parentNode.parentNode.remove()"
                                >
                                    Supprimer
                                </button>
                            </td>
                        </tr>
                        </tbody>
                        <tfoot>
                        <tr class="font-semibold text-gray-900">
                            <th id="add-line" scope="row" colspan="5" class="px-6 py-3">
                                <div class="font-bold text-red-800 flex justify-end">
                                    <p
                                        class="w-fit cursor-pointer hover:underline"
                                        @click="elt = document.createElement('tr');
                                                    elt.innerHTML = component.innerHTML;
                                                    elt.classList = component.classList
                                                    $refs.tbody.appendChild(elt)"
                                    >
                                        Ajouter une ligne
                                    </p>
                                </div>
                            </th>
                        </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
        <div id="step-div-3" class="hidden p-4 space-y-8">
            <div class="flex items-center space-x-4">
                <div class="relative">
                    <input
                        type="number"
                        id="bonus_maitrise"
                        name="proficiency_bonus"
                        class="block w-full px-2.5 pb-2.5 pt-4 text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800 peer"
                        placeholder=" "
                        value="{{ old('proficiency_bonus') ?? 2 }}"
                    />
                    <label
                        for="bonus_maitrise"
                        class="absolute font-titleMiddleAge text-sm text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-[#fafaf8] px-2 peer-focus:px-2 peer-focus:text-red-800 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1"
                    >
                        Bonus de maitrise
                    </label>
                </div>
            </div>
            <div id="div-maitrise" class="">
                <div class="relative overflow-x-auto table-auto shadow-md sm:rounded-lg">
                    <table
                        id="table-maitrises"
                        class="w-full text-sm text-left text-gray-400"
                        x-data="{ component: [] }"
                        x-init="component = $refs.tbody.querySelector('tr')"
                    >
                        <thead class="text-xs uppercase bg-gray-900">
                        <tr>
                            <th scope="col" class="px-6 py-3">
                                Nom de la maîtrise
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Description
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Action
                            </th>
                        </tr>
                        </thead>
                        <tbody x-ref="tbody">
                        <tr x-data="" x-ref="line" class="border-b">
                            <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                                <select id="maitrise_id" name="maitriseIds[]"
                                        class="block w-full px-2.5 pb-2.5 pt-4 text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800">
                                    <option value="">Choisis une option</option>
                                    @foreach($utilities as $utility)
                                        <option value="{{$utility->getKey()}}">{{$utility->name}}</option>
                                    @endforeach
                                </select>
                            </td>
                            <td class="px-6 py-4">
                                <textarea id="maitrise_description" name="maitriseDescriptions[]" rows="4"
                                          class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-600 border-gray-600 placeholder-gray-400 focus:ring-red-800 focus:border-red-800"
                                          placeholder="Je suis convaincu..."></textarea>
                            </td>
                            <td class="px-6 py-4">
                                <button
                                    type="button"
                                    class="font-bold text-red-800 hover:underline cursor-pointer"
                                    @click.prevent="$el.parentNode.parentNode.remove()"
                                >
                                    Supprimer
                                </button>
                            </td>
                        </tr>
                        </tbody>
                        <tfoot>
                        <tr class="font-semibold text-gray-900">
                            <th id="add-line" scope="row" colspan="3" class="px-6 py-3 text-right">
                                <div class="font-bold text-red-800 flex justify-end">
                                    <p
                                        class="w-fit cursor-pointer hover:underline"
                                        @click="elt = document.createElement('tr');
                                                    elt.innerHTML = component.innerHTML;
                                                    elt.classList = component.classList
                                                    $refs.tbody.appendChild(elt)"
                                    >
                                        Ajouter une ligne
                                    </p>
                                </div>
                            </th>
                        </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
            <div id="div-feature" class="">
                <div class="relative overflow-x-auto table-auto shadow-md sm:rounded-lg">
                    <table
                        id="table-features"
                        class="w-full text-sm text-left text-gray-400"
                        x-data="{ component: [] }"
                        x-init="component = $refs.tbody.querySelector('tr')"
                    >
                        <thead class="text-xs uppercase bg-gray-900">
                        <tr>
                            <th scope="col" class="px-6 py-3">
                                Nom de l'aptitude
                            </th>
                            <th scope="col" class="px-6 py-3">
                                Action
                            </th>
                        </tr>
                        </thead>
                        <tbody x-ref="tbody">
                        <tr x-data="" x-ref="line" class="border-b">
                            <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                                <select id="feature_id" name="features[]"
                                        class="block w-full px-2.5 pb-2.5 pt-4 text-sm bg-transparent rounded-lg border-1 border-gray-600 appearance-none focus:outline-none focus:ring-0 focus:border-red-800">
                                    <option value="">Choisis une option</option>
                                    @foreach($features as $feature)
                                        <option value="{{$feature->getKey()}}">{{$feature->name}}</option>
                                    @endforeach
                                </select>
                            </td>
                            <td class="px-6 py-4">
                                <button
                                    type="button"
                                    class="font-bold text-red-800 hover:underline cursor-pointer"
                                    @click.prevent="$el.parentNode.parentNode.remove()"
                                >
                                    Supprimer
                                </button>
                            </td>
                        </tr>
                        </tbody>
                        <tfoot>
                        <tr class="font-semibold text-gray-900">
                            <th id="add-line" scope="row" colspan="3" class="px-6 py-3 text-right">
                                <div class="font-bold text-red-800 flex justify-end">
                                    <p
                                        class="w-fit cursor-pointer hover:underline"
                                        @click="elt = document.createElement('tr');
                                                    elt.innerHTML = component.innerHTML;
                                                    elt.classList = component.classList
                                                    $refs.tbody.appendChild(elt)"
                                    >
                                        Ajouter une ligne
                                    </p>
                                </div>
                            </th>
                        </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
        <div id="step-div-4" class="hidden p-4 space-y-8">
            <div id="div-coins" class="">
                <div class="grid grid-cols-5 gap-4">
                    @foreach(\App\Models\Coin::all() as $coin)
                        <div>
                            <label for="{{ $coin->name }}"
                                   class="font-titleMiddleAge text-red-800">{{ $coin->name }}</label>
                            <input
                                type="number"
                                id="{{ $coin->name }}"
                                name="coins[{{$coin->getKey()}}]"
                                class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 appearance-none border-gray-600 focus:outline-none focus:ring-0 focus:border-red-800 peer"
                                placeholder="Quantité"
                                value="{{ old("coins.{$coin->getKey()}") ?? "" }}"
                            />
                        </div>
                    @endforeach
                </div>
            </div>
            <div id="div-equipment" class="">
                <x-markdown-editor :id="'description-markdown-editor'" :title="'Équipement'"
                                   :name="'equipment'"></x-markdown-editor>
            </div>
        </div>
        <div class="flex items-center justify-center space-x-8 p-4">
            <div id="prev"
                 class="hidden inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 disabled:opacity-25 transition ease-in-out duration-150 cursor-pointer">
                <p class="hidden sm:block">Étape précédente</p>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                     stroke="currentColor" class="w-6 h-6 sm:hidden">
                    <path stroke-linecap="round" stroke-linejoin="round"
                          d="M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75"/>
                </svg>
            </div>
            <div id="next"
                 class="inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 disabled:opacity-25 transition ease-in-out duration-150 cursor-pointer">
                <p class="hidden sm:block">Étape suivante</p>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                     stroke="currentColor" class="w-6 h-6 sm:hidden">
                    <path stroke-linecap="round" stroke-linejoin="round"
                          d="M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75"/>
                </svg>
            </div>
            <button id="finish" type="submit"
                    class="hidden inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 disabled:opacity-25 transition ease-in-out duration-150 cursor-pointer">
                <span class="hidden sm:block">Terminer</span>
                <svg id="check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-6 h-6 sm:hidden"
                     fill="currentColor">
                    <path
                        d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/>
                </svg>
            </button>
        </div>
    </form>
</x-app-layout>

<script>
    let attacks = {!! $attacks !!};

    function disabledDescription(select) {
        let attack = attacks.find(elt => elt.id === parseInt(select.value))
        let textArea = select.parentNode.parentNode.querySelector('textarea')
        if (attack.description) {
            textArea.setAttribute('readonly', '')
            textArea.classList.add('cursor-not-allowed')
            if (textArea.value) {
                textArea.value = ''
            }
        } else {
            textArea.removeAttribute('readonly')
            textArea.classList.remove('cursor-not-allowed')
        }
    }
</script>
